Preliminary Upgrade-Instructions
================================

This document describes the Phorum upgrading process. Please keep in mind, 
that these instructions are neither complete, nor final. If you find
problems in upgrading which are not described here or if you have 
useful additions, please let us know.

Table of contents:

1. Upgrading from a Phorum5 version to another Phorum5 version
2. Upgrading from Phorum 3.4.x to Phorum5


1. Upgrading from a Phorum5 version to another Phorum5 version
--------------------------------------------------------------

The simplest upgrade method is:

- Backup your existing Phorum5 installation.
  Before doing an upgrade, it is always wise to make a good backup
  of your running system. Make a backup your Phorum install directory 
  and the database in which your Phorum tables are stored;

- Download a newer Phorum5 package;

- Extract the files and put them on top of the current installation;

- Keep the database settings from {phorum dir}/include/db/config.php 
  the same;

- Open your forum using your webbrowser. In case a database upgrade 
  is needed, you will be prompted to go to the admin page. In that case 
  open the {phorum url}/admin.php page, which will guide you through 
  the upgrade.

This method will preserve all of your active settings and modules, 
but will overwrite hacks and any changes made to the default template 
(in the directory {phorum dir}/templates/default). Other templates will 
be kept intact.

If you need to preserve the hacks and changes to the default template,
you can following one of the following options:

- Extract the new Phorum distribution to its own directory and reapply 
  your changes before putting it over the existing installation;
  
- Create a backup of your existing installation. Install the new
  distribution on top of the old one and reapply the changes to 
  the new version while it is "live".


2. Upgrading from Phorum 3.4.x to Phorum5
-----------------------------------------

- Download and unpack the Phorum5 package;

- Follow the installation instructions in docs/install.txt. Install 
  Phorum5 is a new directory. 

- Convert the old forum data:

  In the scripts directory of your Phorum5 distribution, you will find
  a script named phorum3to5convert.php. Instructions for using this
  script can be found at the top of this script itself. The script will
  convert your old forum to Phorum5. Everything, but permission levels,
  is converted.

- Update the posted message counters for the users:

  In the scripts directory, you will also find a script named
  "update_postcount.php". This script can be used to update the number
  of posts for users to the right value. So if you want correct numbers
  to show up in the user profiles, just run this script once AFTER the
  conversion has been completed. To run it, you will have to copy it
  over to the main Phorum5 directory. After that you can either run
  it from the command line or by opening it from your webbrowser. See
  also the instructions in the script itself.

